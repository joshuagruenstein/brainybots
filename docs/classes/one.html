<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta name="generator" content="jemdoc, see http://jemdoc.jaboc.net/" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" href="../jemdoc.css" type="text/css" /><title>Bayesian Bonanza</title>
<!-- MathJax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async>
</script>
<script src="https://cdn.jsdelivr.net/npm/roughjs@4.0.4/bundled/rough.min.js"></script>
<script>
function get_illustration(id, width=400, height=200) {
    const canvas = document.getElementById(id);
    const ctx = canvas.getContext("2d");
    const pixelRatio = window.devicePixelRatio || 1;
    canvas.width = pixelRatio*width;
    canvas.height = pixelRatio*height;
    ctx.scale(pixelRatio, pixelRatio);
    ctx.mozImageSmoothingEnabled = false;
    ctx.imageSmoothingEnabled = false;
    const rc = rough.canvas(canvas);
    return [ctx, rc];
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
	  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
<!-- End MathJax -->
</head>
<body>
<table summary="Table for page layout." id="tlayout">
<tr valign="top">
<td id="layout-menu">
<div class="menu-category">Information</div>
<div class="menu-item"><a href="../index.html">Home</a></div>
<div class="menu-item"><a href="../docs.html">Robot&nbsp;Docs</a></div>
<div class="menu-item"><a href="https://github.com/joshuagruenstein/brainybots" target="blank">Github</a></div>
<div class="menu-category">Classes</div>
<div class="menu-item"><a href="../classes/one.html" class="current">Bayesian&nbsp;Bonanza</a></div>
</td>
<td id="layout-content">
<div id="toptitle">
<h1>Bayesian Bonanza</h1>
</div>
<p>You probably know a little bit about probability from reasoning about every day events: </p>
<ol>
<li><p>The probability of flipping a heads with a fair coin is \(\frac{1}{2}\)</p>
</li>
<li><p>The probability that it'll rain tomorrow is \(30\%\) </p>
</li>
</ol>
<p>In this class, this is a good way to think about probability- assigning a number or &ldquo;likelihood&rdquo; to a given event, that comes from a space of events we understand. For example, the space of events with one flip of a fair coin is \(\{H, T\}\) and to each element in that space, we assign the probability \(\frac{1}{2}.\) </p>
<h3>Conditional Probability</h3>
<p>In the real world, we don't just deal with singular events- we deal with thousands of events, some of which are connected and some of which are not. We're often interested in reasoning about some event's likelihood based on some other event- the usage of partial information that we already have. </p>
<p>In probability terms, we like to think about \(\mathbb{P}(A|B)\), or the probability that event \(A\) occurs given event \(B.\) <br /></p>
<ol>
<li><p>The likelihood that you're eating ice cream given that it's summer is higher than the likelihood that you're eating ice cream given that it's winter (maybe). </p>
</li>
<li><p><b>Practice Problem</b>: Assume we have a fair 6-sided die </p>
<ol>
<li><p>What's the probability that our roll is odd? </p>
</li>
<li><p>What's the probability our roll is a 1?</p>
</li>
<li><p>What's the probability our roll is a 1 given that we know our roll is odd? </p>
</li>
</ol>

</li>
</ol>
<p>Conditional probability definition: </p>
<p style="text-align:center">
\[
\mathbb{P}(A|B) = \frac{\mathbb{P}(A \cap B)}{\mathbb{P}(B)}
\]
</p><div class="infoblock">
<div class="blocktitle">Notation note</div>
<div class="blockcontent">
<p>\(A \cap B\), when \(A\) and \(B\) are sets, indicates the set of all elements belonging to both \(A\) and \(B.\)</p>
</div></div>
<h4>Practice: </h4>
<p>You are standing in front of three doors, and told that a prize lies behind one of the three doors, with equal probability. You pick one of the doors, and the host then opens one of the remaining doors, showing you that there is no prize behind it. Then the host offers you two options:</p>
<ol>
<li><p>Stay with your first pick</p>
</li>
<li><p>Switch to the last door</p>
</li>
</ol>
<p>What's the best strategy?</p>
<div class="infoblock solutionblock">
<div class="blocktitle">Solution<span class="solutionhelp"> (hover to show)</span>:</div>
<div class="blockcontent">
<p>Under the first strategy, our probability of winning (call this event A) is just \(\frac{1}{3}\). But under the second strategy, letting event \(B\) be the event that the door the host opens does not have the prize, we can compute </p>
<p style="text-align:center">
\[
\begin{aligned}
\mathbb{P}(A|B) &amp;= \frac{\mathbb{P}(A \cap B)}{\mathbb{P}(B)} \\
&amp;= \frac{\frac{4}{9}}{\frac{2}{3}} \\
&amp;= \frac{2}{3}
\end{aligned}
\]
</p><p>so one should always switch!</p>
</div></div>
<p>In the probability world, we often care about whether two events are independent or dependent. Note this concept is not the same as causation- we define independence as when the occurrence of one event does not affect the likelihood of the occurrence of a second event. We can define this nicely using conditional probability! </p>
<p>Independence definition- A is independent of event B when:  </p>
<p style="text-align:center">
\[
\mathbb{P}(A) = \mathbb{P}(A|B)
\]
</p><h3>Total Probability Theorem</h3>
<p>To set up this result, let's go back to our example with ice cream and the seasons. Let's say we're trying to find the probability you're eating ice cream at any given time during the year. All we know is the following</p>
<ol>
<li><p>Each season lasts for exactly \(\frac{1}{4}\) of the year</p>
</li>
<li><p>When it's summer you're eating ice cream \(\frac{3}{4}\) of the time </p>
</li>
<li><p>When it's winter you're eating ice cream \(\frac{1}{4}\) of the time</p>
</li>
<li><p>In spring or fall, you're eating ice cream \(\frac{1}{2}\) of the time</p>
</li>
</ol>
<p>To get the total probability you're eating ice cream at any point during the year, you'd probably do the following: </p>
<p style="text-align:center">
\[
\frac{1}{4}\cdot\frac{3}{4} + \frac{1}{4}\cdot \frac{1}{4} + \frac{1}{4}\cdot\frac{1}{2} + \frac{1}{4}\cdot\frac{1}{2}
\]
</p><p>Note that this only works because summer, winter, spring, and fall together cover the entire year (and don't overlap), forming what we call a &ldquo;partition&rdquo; of the year. The total probability theorem states: </p>
<p style="text-align:center">
\[
\mathbb{P}(B) = \mathbb{P}(A_1)\mathbb{P}(B|A_1) + \mathbb{P}(A_1)\mathbb{P}(B|A_2) + &hellip; + \mathbb{P}(A_1)\mathbb{P}(B|A_n) 
\]
</p><p>where \(A_1, &hellip;, A_n\) forms a partition of the space. </p>
<h3>Bayes Rule</h3>
<p>Bayes&rsquo; Rule allows us to begin our inference journey! It's a formula that follows from a rearrangement of the conditional probability formula: </p>
<p style="text-align:center">
\[
\mathbb{P}(A|B) = \frac{\mathbb{P}(B|A)\mathbb{P}(A)}{\mathbb{P}(B)}
\]
</p><p>For example, consider the following: </p>
<ol>
<li><p>let A be the event that a person caught a cold</p>
</li>
<li><p>let B be the event that a person drank chicken noodle soup</p>
</li>
</ol>
<p>Then, at MIT Medical, we probably know how many people have caught colds: \(P(A) = 0.6\), and we happen to know that half of all people drink chicken noodle soup: \(P(B) = 0.5\). And we probably know from our clinic data what proportion of sick people drank soup: \(P(B|A)= 0.3\). But what we really care about is knowing what proportion of people who drink soup get sick- this would tell us if soup helps! </p>
<p>Using Bayes Rule, we can compute that </p>
<p style="text-align:center">
\[
\begin{aligned}
\mathbb{P}(A|B) &amp;= \frac{\mathbb{P}(B|A)\mathbb{P}(A)}{\mathbb{P}(B)} \\
&amp;= \frac{0.3\cdot 0.6}{0.5}\\
&amp;= 0.36\\
\end{aligned}
\]
</p><p>so soup helps!</p>
<h2>Lab: where am I?</h2>
<p>For our first lab, we will be applying our newfound probability knowledge to identify where our robots have been hidden.  </p>
<canvas class="illustration" id="rooms" style="height:150px"></canvas>
<script>
(function() {
const [ctx, rc] = get_illustration('rooms', width=400, height=150);

rc.rectangle(10, 10, 150, 100);
rc.rectangle(180, 10, 200, 100);


ctx.font = '15px sans-serif';
ctx.textAlign = 'center';

ctx.fillText("Short Room", 10+150/2, 130);
ctx.fillText("Long Room", 180+200/2, 130);

rc.circle(30, 60, 20, { roughness: 0.5, fill: 'blue' });
rc.circle(200, 60, 20, { roughness: 0.5, fill: 'blue' });

const sline = { roughness: 1.5, stroke: 'red', strokeWidth:0.5 };

function sensor(s, e) {
    rc.line(s, 62, e, 70, sline);
    rc.line(s, 58, e, 50, sline);
    rc.line(s, 60, e, 60, sline);
}

sensor(45,150);
sensor(215,370);
})();
</script>
<p>Each robot is outfitted with a Sharp distance sensor that can report how far away the robot is from an object (with some error).  We will use this sensor to estimate the likelyhood of our robot being placed in each room: one long, and one short.</p>
<h3>Robot setup</h3>
<p>To begin, connect your computer's wifi to a robot's network (ask an instructor for the SSID and password).  Then, in your browser navigate to <a href="http://192.168.0.1/" target=&ldquo;blank&rdquo;>http://192.168.0.1/</a>.  You should see something like this:</p>
<p>INSERT JUPYTER SCREENSHOT</p>
<p>Each cell of the notebook contains some code. Select the first cell, and press <tt>shift+enter</tt> on the keyboard to run it.  Keep pressing <tt>shift+enter</tt> until you've run through the notebook.  If you see the message &ldquo;Robot all set!&rdquo; output by the last cell, everything it working!</p>
<p>By pressing <tt>shift+enter</tt> again, a new empty cell should be created.  The following code will read from the distance sensor, and return a <tt>float</tt> result in centimeters:</p>
<div class="codeblock">
<div class="blockcontent"><pre>
<span class="pycommand">&gt;&gt;&gt; bot.getDistance() <span class = "comment"># shift-enter to run</span></span>
8.4
</pre></div></div>
<h3>Estimation!</h3>
<p>Now that we can read from our robot's distance sensors, we have all we need to compute the probability of being in each room!</p>
<p>To begin, let's define \(A\) as a <i>discrete</i> random variable that represents the room the robot is in, with \(A=0\) as the short room and \(A=1\) as the long room.  We'll also define \(B\) as a <i>gaussian</i> random variable with \(\sigma=5\), with the mean \(\mu=50\) if we are in the short room and \(\mu=100\) if we are in the long room.  This is because we don't expect our sensor reading to be perfect; in fact, we might expect around 5 centimeters of error in our reading.  In mathematical terms, assuming a sensor reading of \(d\) centimeters: </p>
<p style="text-align:center">
\[
\begin{aligned}
P(A) &amp;= 0.5 \text{ (uniform prior across rooms)} \\
P(B=d | A=0) &amp;= \mathcal N (d ; \mu=50,\sigma=5) \\
P(B=d | A=1) &amp;= \mathcal N (d ; \mu=100,\sigma=5)
\end{aligned}
\]
</p><p>Given this, use Bayes rule and the total probability theorem to compute the probability the robot is in each room in a cell in the Jupyter notebook!</p>
<div class="infoblock solutionblock">
<div class="blocktitle">Solution<span class="solutionhelp"> (hover to show)</span>:</div>
<div class="blockcontent">
<p>Our goal is to compute \(P(A=a|B=d)\) for each room \(a\).  From Bayes rule,</p>
<p style="text-align:center">
\[
P(A=a|B=d) = \frac{P(B=d|A=a) P(A=a)}{P(B=d)}
\]
</p><p>Conveniently, we have \(P(B=d|A=a)\) and \(P(A=a)\) already.  All we need is \(P(B=d)\), which we can get from the total probability theorem:</p>
<p style="text-align:center">
\[
P(B=d) = \frac{1}{2} P(B=d|A=0) + \frac{1}{2} P(B=d|A=1)
\]
</p><p>Incorporating this into our first equation, we get</p>
<p style="text-align:center">
\[
\begin{aligned}
P(A=a|B=d) &amp;= \frac{P(B=d|A=a) P(A=a)}{\frac{1}{2} P(B=d|A=0) + \frac{1}{2} P(B=d|A=1)} \\
&amp;= \frac{P(B=d|A=a)}{P(B=d|A=0) + P(B=d|A=1)}
\end{aligned}
\]
</p></div></div>
<canvas class="illustration" id="gaussian" style="height:200px"></canvas>
<script>
(function() {

const [ctx, rc] = get_illustration('gaussian', width=400, height=200);

ctx.font = '15px sans-serif';
ctx.textAlign = 'center';

ctx.scale(window.devicePixelRatio*1.35, window.devicePixelRatio*1.35);

rc.line(0, 82.482, 204.96+5, 82.482, { roughness: 0.3, stroke: 'black', strokeWidth:2, simplification:0 });

rc.path('M5.078,82.456c4.511-0.019,9.021-0.058,13.53-0.175c4.312-0.113,8.639-0.297,12.923-0.836c4.536-0.572,8.991-1.522,13.261-3.25c4.255-1.723,8.016-4.334,11.491-7.389c3.378-2.968,6.334-6.613,8.934-10.324c2.676-3.817,5.156-7.777,7.458-11.854c2.372-4.2,4.644-8.458,6.896-12.729c2.208-4.187,4.419-8.368,6.715-12.502c2.244-4.042,4.669-8.055,7.508-11.674c1.471-1.875,3.092-3.546,4.906-5.054c1.765-1.467,3.896-2.293,6.126-2.468c2.262-0.177,4.408,0.98,6.232,2.234c1.866,1.283,3.42,3.086,4.861,4.844c2.973,3.619,5.365,7.744,7.704,11.822c2.267,3.953,4.362,8.014,6.489,12.049c2.24,4.25,4.479,8.502,6.841,12.682c2.29,4.056,4.69,8.058,7.354,11.858c2.731,3.898,5.724,7.564,9.159,10.809c3.378,3.188,7.235,5.673,11.417,7.527c4.024,1.785,8.44,2.759,12.768,3.305c4.449,0.563,8.912,0.803,13.39,0.938c4.426,0.135,8.856,0.164,13.284,0.185c0.227,0,0.449,0.002,0.674,0.003', { roughness: 0.2, stroke: '#0071BC', strokeWidth:2, simplification:0 });

rc.line(105.039, 4.189, 105.039, 85.587, { roughness: 0.4, stroke: 'green', strokeWidth:1 });
rc.line(130.029, 34.994, 130.029, 85.587, { roughness: 0.4, stroke: 'red'});
rc.line(80.049, 35.037, 80.049, 85.587, { roughness: 0.4, stroke: 'red'});

ctx.font = 'italic 10px serif';
ctx.textAlign = 'center';

ctx.fillText("d", 105, 97);
ctx.fillText("d-σ", 80, 97);
ctx.fillText("d+σ", 130, 97);


})();
</script>
</td>
</tr>
</table>
</body>
</html>
